@page "/api-inventory"
@using Milk.Apim.Admin.Models
@inject IJSRuntime JSRuntime

<h3>ğŸ›¡ï¸ API æ²»ç†èˆ‡ç›¤é»æ¨¡çµ„</h3>

<div class="alert alert-info">
    æœ¬æ¨¡çµ„å°é½Šã€Šä¿éšªæ¥­è¾¦ç†è³‡è¨Šå®‰å…¨é˜²è­·è‡ªå¾‹è¦ç¯„ã€‹Q1 & Q2 è¦æ±‚ï¼Œæä¾›å®šæœŸç›¤é»èˆ‡é¢¨éšªåˆ†ç´šç®¡ç†ã€‚
</div>

<table class="table table-hover">
    <thead class="table-dark">
        <tr>
            <th>API åç¨±</th>
            <th>è·¯å¾‘</th>
            <th>é¢¨éšªåˆ†ç´š</th>
            <th>è² è²¬éƒ¨é–€</th>
            <th>æœ€å¾Œç›¤é»æ—¥</th>
            <th>ç‹€æ…‹</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var api in mockApis)
        {
            <tr>
                <td>@api.Name</td>
                <td><code>@api.RoutePath</code></td>
                <td>
                    <span class="badge @(api.Risk == RiskLevel.L1 ? "bg-danger" : api.Risk == RiskLevel.L2 ? "bg-warning" : "bg-success")">
                        @api.Risk.ToString()
                    </span>
                </td>
                <td>@api.Department</td>
                <td>@api.LastReviewedAt.ToShortDateString()</td>
                <td>@(api.IsExposed ? "âœ… å·²ç™¼å¸ƒ" : "ğŸŸ¡ è‰ç¨¿")</td>
            </tr>
        }
    </tbody>
</table>

<button class="btn btn-primary" @onclick="ExportReport">ğŸ“¥ åŒ¯å‡ºç¨½æ ¸å ±è¡¨ (PDF/Excel)</button>

@code {
    private List<ApiEntry> mockApis = new()
    {
        new ApiEntry { Name = "ç†è³ ç”³è«‹ API", RoutePath = "/api/v1/claims", Risk = RiskLevel.L1, Department = "ç†è³ éƒ¨", IsExposed = true },
        new ApiEntry { Name = "ä¿å–®è©¦ç®— API", RoutePath = "/api/v1/quote", Risk = RiskLevel.L2, Department = "ç²¾ç®—éƒ¨", IsExposed = true },
        new ApiEntry { Name = "å…¬é–‹ç”¢å“æ¸…å–®", RoutePath = "/api/v1/products", Risk = RiskLevel.L3, Department = "å¸‚å ´éƒ¨", IsExposed = true }
    };

    private void ExportReport()
    {
        // å¯¦ä½œè‡ªå‹•åŒ–ç›¤é»å ±è¡¨åŒ¯å‡ºé‚è¼¯
    }
}
